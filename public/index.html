<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Hello World!</title>

  <!-- CSS Now -->
  <link rel="stylesheet" type="text/css" href="style.css" />
</head>
<!--i am the best-->
<body>
<h1><em><strong>Hello World!</strong></em></h1>
<article>
<p>Go away</p>
<blockquote class="rgb">
<header>
<ul>
  <li>You're annoying</li>
  <li>So leave</li>
</ul>
</header>
</blockquote>
<blockquote>
<figure>
<blockquote class="hex">
  <p><strong>goodbye</strong></b></p>
</blockquote>
</figure>
<aside>
<p><del>You're awesome</del>. <ins>You're trash</ins>.</p>
<p><a href="neeko.jpeg">surprise</a></p>
</aside>
</article>

<div id="first">first thing</div>
<div id="second">second thing</div>
<div id="third">third thing</div>

<script>
  console.log("click away from this page or else you'll die")
  console.log("your last warning")
  let goodbye = "bye"
  console.log("hello world " + goodbye)
</script>
<script>
  function doNothing() {

  }
  console.log(doNothing())
  console.log(doNothing())
</script>
<script>
  function composeADumbMessage(){
    return "hello world"
  }
  console.log(composeADumbMessage())
  console.log(composeADumbMessage())
  function printADumbMessage() {
    console.log(composeADumbMessage())
  }
</script>
<script>
  function add(x,y) {
    return x+y
  }
  console.log(add(789,987))
  console.log(add(456,654))
  console.log(add(123,321))
</script>
<canvas id="tutorial" width="420" height="420"></canvas>
<div>red shifter: <input type="range" min="-255" max="255" id="redshifter-box" value="0" onchange="draw()"></input></div>
<div>green shifter: <input type="range" min="-255" max="255" id="greenshifter-box" value="0" onchange="draw()"></input></div>
<div>blue shifter: <input type="range" min="-255" max="255" id="blueshifter-box" value="0" onchange="draw()"></input></div>
<div>transparency shifter: <input type="range" min="0" max="255" id="transparencyshifter-box" value="0" onchange="draw()"></input></div>
<script>
  
  function colorShifter(rgbaArray, redFactor, greenFactor, blueFactor, transparentFactor) {
    rgbaArray.forEach(function(value, index) {
      if (index % 4 == 0) {
        rgbaArray[index] = value + redFactor
      } else if (index % 4 == 1) {
        rgbaArray[index] = value + greenFactor
      } else if (index % 4 == 2) {
        rgbaArray[index] = value + blueFactor
      } else if (index % 4 == 3) {
        rgbaArray[index] = value - transparentFactor
      }

      if (index < 1000) {
        console.log(
          "index=", index, 
          "value=", value, 
          "redFactor=", redFactor, 
          "greenFactor=", greenFactor, 
          "blueFactor=", blueFactor, 
          "transparentFactor=", transparentFactor)
      }

      if (index % 4 == 3) {
        let r = rgbaArray[index - 3]
        let g = rgbaArray[index - 2]
        let b = rgbaArray[index - 1]

        if (b > g && b > r) {
          rgbaArray[index] = 0
        }
      }

    })
  }

  // https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial/Using_images
  function draw() {
      let redShifterBox = document.querySelector("#redshifter-box")
      let greenShifterBox = document.querySelector("#greenshifter-box")
      let blueShifterBox = document.querySelector("#blueshifter-box")
      let transparencyShifterBox = document.querySelector("#transparencyshifter-box")
    
      let redFactor = parseInt(redShifterBox.value)
      let greenFactor = parseInt(greenShifterBox.value)
      let blueFactor = parseInt(blueShifterBox.value)
      let transparencyFactor = parseInt(transparencyShifterBox.value)

      if (Number.isNaN(redFactor)) {
        redFactor = 0
      }

      if (Number.isNaN(greenFactor)) {
        greenFactor = 0
      }

      if (Number.isNaN(blueFactor)) {
        blueFactor = 0
      }

      if (Number.isNaN(transparencyFactor)) {
        transparencyFactor = 0
      }

      console.log("x", redFactor, greenFactor, blueFactor, transparencyFactor)

      let canvas = document.querySelector("#tutorial")
      let ctx = canvas.getContext('2d')

      var img = new Image();   // Create new img element
      img.onload = function() {
        console.log("finishLoading")
        ctx.drawImage(img, 0, 0)
        let myImageData = ctx.getImageData(0, 0, 420, 420)
        let d = myImageData.data
        
        console.log(d)

        colorShifter(d, redFactor, greenFactor, blueFactor, transparencyFactor)
        
        ctx.putImageData(myImageData, 0, 0)

        console.log(d)


        
        //

        // What happens is you get a ImageData object with a data attribute that 
        // contains a big array. For every pixel, there are four entries in the array, 
        // r, g, b, and alpha. So the array looks something like [pixel1R, pixel1G, pixel1B, 
        // pixel1Alpha, ..., pixelNR, pixelNG, pixelNB, pixelNAlpha].
      }
      img.src = 'neeko.jpeg'; // Set source path
    }
    draw()
</script>
<script>
  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/parseInt
  // https://stackoverflow.com/a/10258846
  function convertBinaryToDecimal(binaryString) {
    return parseInt(binaryString, 2)
  }
  console.log(convertBinaryToDecimal("110"))
  console.log(convertBinaryToDecimal("10"))
  console.log(convertBinaryToDecimal("101"))
  console.log(convertBinaryToDecimal("1100"))
  console.log(convertBinaryToDecimal("11111"))

</script>
<script>
  // https://stackoverflow.com/a/9939785
  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/toString
  function convertDecimalToBinary(decimalNumber) {
    return (decimalNumber).toString(2)
  }
  console.log(convertDecimalToBinary(6))
  console.log(convertDecimalToBinary(2))
  console.log(convertDecimalToBinary(5))
  console.log(convertDecimalToBinary(12))
  console.log(convertDecimalToBinary(31))
  
</script>
<script>
  // https://stackoverflow.com/a/57805

  function convertDecimalToHexadecimal(decimalNumber) {
    return decimalNumber.toString(16)
  }
  console.log(convertDecimalToHexadecimal(6))
  console.log(convertDecimalToHexadecimal(2))
  console.log(convertDecimalToHexadecimal(5))
  console.log(convertDecimalToHexadecimal(12))
  console.log(convertDecimalToHexadecimal(31))
</script>
<script>
  function convertHexadecimalToDecimal(hexadecimalString) {
    return parseInt(hexadecimalString, 16)
  }
  console.log(convertHexadecimalToDecimal("6"))
  console.log(convertHexadecimalToDecimal("2"))
  console.log(convertHexadecimalToDecimal("5"))
  console.log(convertHexadecimalToDecimal("C"))
  console.log(convertHexadecimalToDecimal("1F"))
</script>
<script>
  // uncomment this line to do annoying stuff
  // document.onmousemove = function() { console.log("the mouse hasn't moved") }

  // uncomment this line to replace the contents of the page
  // TODO: explain document.onready later
  // document.write("<div> hello </div>")
</script>
<script>
  // https://developer.mozilla.org/en-US/docs/Web/API/Document
  // document = the whole web page, in javascript
  // https://developer.mozilla.org/en-US/docs/Web/API/Element
  // element = html elements like b, body, in javascript

  let myElement = document.createElement("div")
  myElement.innerHTML = "hi"
  myElement.style.backgroundColor = "red"
  document.body.appendChild(myElement)
  myElement.style.backgroundColor = "blue"
  myElement.style.backgroundColor = "aliceblue"
  myElement.innerHTML = "go away"
  myElement.innerHTML = "you're still here?? LEAVE !!!!!!!!!!!!!!!!!"
</script>
<script>
  // https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelector
  console.log(document.querySelector("figure"))
  console.log(document.querySelector("#second"))
  console.log(document.querySelector("#second").innerHTML)
  let s = document.querySelector("#second")
  console.log(s.innerHTML)
  document.querySelector("#second").innerHTML = "secondthing + pen"
</script>
<script>
  function changeColorAndContentOfOutputBox(){
    let outputDiv = document.querySelector("#output-box")
    let rBox = document.querySelector("#r-box")
    let gBox = document.querySelector("#g-box")
    let bBox = document.querySelector("#b-box")
    outputDiv.innerHTML = 
      "#" + 
      convertDecimalToHexadecimal(convertBinaryToDecimal(rBox.value)) +
      "," +
      convertDecimalToHexadecimal(convertBinaryToDecimal(gBox.value)) +
      "," +
      convertDecimalToHexadecimal(convertBinaryToDecimal(bBox.value))

    outputDiv.style.backgroundColor = 
      "rgb(" + 
      convertBinaryToDecimal(rBox.value) + 
      "," + 
      convertBinaryToDecimal(gBox.value) + 
      "," + 
      convertBinaryToDecimal(bBox.value) + 
      ")"
  }
</script>
<!-- https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Input -->

<div style="margin-top:10em">
  (24-bit color)
  <div>binary r: <input id="r-box" type="text"></input></div>
  <div>binary g: <input id="g-box" type="text"></input></div>
  <div>binary b: <input id="b-box" type="text"></input></div>
  
  
  <button onclick="changeColorAndContentOfOutputBox()">
    don't click me
  </button>
  <div id="output-box">
    change me
  </div>
</div>

<script>
  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String
  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Addition
  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/charCodeAt
  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/fromCharCode
  console.log("c", "c".charCodeAt(0))
  let baz = "q"
  console.log(baz, baz.charCodeAt(0))
  console.log("u", "u".charCodeAt(0))
  console.log(String.fromCharCode(99,117))
</script>


<div style="margin-top:1em">
  <div>ascii character: <input id="ascii-box" type="text"></input></div>
  
  <button onclick="foo()">
    don't click me
  </button>
  <div id="output-box2">
    hexadecimal
  </div>
</div>
<script>
  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/from
  function foo(){
    let outputDiv = document.querySelector("#output-box2")
    let asciiBox = document.querySelector("#ascii-box")
    let chars = Array.from(asciiBox.value)
    let outputStr = ""
    chars.forEach(function(foo) {
      outputStr = outputStr + " " + convertDecimalToHexadecimal(foo.charCodeAt(0))
    })
    outputDiv.innerHTML = outputStr
  }
</script>
</body>
</html>